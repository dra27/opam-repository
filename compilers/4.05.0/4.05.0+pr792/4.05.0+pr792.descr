Fixing the limitations on destructive substitutions(trunk)