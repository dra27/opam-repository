Add optional editline support
Target branch: trunk