Improve comparisons to Array.length
Target branch: trunk